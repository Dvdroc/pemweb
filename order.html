<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <title>Detail Produk</title>
    <script src="Style.js"></script>
    <script src="cake.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-SgOJa3DmI69IUzQ2PVdRZhwQ+dy64/BUtbMJw1MZ8t5HZApcHrRKUc4W0kG879m7" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/js/bootstrap.bundle.min.js" integrity="sha384-k6d4wzSIapyDyv1kpU366/PK5hCdSbCRGRCMv+eplOQJWyd1fbcAu9OCUj5zNLiq" crossorigin="anonymous"></script>
</head>

<!-- Main Page -->
<body class="bg-gray-100 p-6 font-sans">
<div class="relative flex size-full min-h-screen flex-col bg-[#fcf8f9] group/design-root overflow-x-hidden" style='font-family: Epilogue, "Noto Sans", sans-serif;'>
    <div class="layout-container flex h-full grow flex-col">
        <header class="fixed top-0 left-0 right-0 z-50 flex items-center justify-between whitespace-nowrap border-b border-solid border-b-[#f3e7ea] px-10 py-3 bg-[#fcf8f9] shadow-md">
            <!-- Bakery -->
            <div class="flex items-center gap-4 text-[#1b0d11]">
              <div class="size-4">
                  <defs>
                    <clipPath id="clip0_6_319"><rect width="48" height="48" fill="white"></rect></clipPath>
                  </defs>
              </div>
              <h2 class="text-[#1b0d11] text-lg font-bold leading-tight tracking-[-0.015em]">Bakery</h2>
            </div>
            <div class="flex flex-1 justify-end gap-8">
              <div class="flex items-center gap-9">
                <!-- Home -->
                <a class="text-[#1b0d11] text-sm font-medium leading-normal" href="Home.html">Home</a>
                <!-- All Cakes -->
                <a class="text-[#1b0d11] text-sm font-medium leading-normal" href="home.html#all-cakes">All Cakes</a>
                <!-- Custom Cake -->
                <a class="text-[#1b0d11] text-sm font-medium leading-normal" href="Custom.html">Custom Cake</a>
                <!--FAQ-->
                <a class="text-[#1b0d11] text-sm font-medium leading-normal" href="FAQ.html">FAQ</a>
                <!-- List Pesanan -->
                <a class="text-[#1b0d11] text-sm font-medium leading-normal" href="datapesanan.html">List Pesanan</a>
                <!-- About -->
                <a class="text-[#1b0d11] text-sm font-medium leading-normal" href="about.html">About</a>
                <button class="text-[#1b0d11] text-sm font-medium leading-normal" onclick="logout()" >Logout</button>
              </div>
              <!-- Constact Us -->
              <a href="kontak.html"
                class="flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-full h-10 px-4 bg-[#ee2b5c] text-[#fcf8f9] text-sm font-bold leading-normal tracking-[0.015em]">
                <span class="truncate">Contact Us</span>
            </a>
            </div>
          </header>

          <div class="max-w-4xl mx-auto  rounded-xl shadow-lg p-4 mt-10 border">
            <div class="flex flex-col md:flex-row">
              <!-- Gambar Produk -->
              <div class="md:w-3/4 mb-4 md:mb-0">
                <img id="productImage"class="rounded-lg w-full h-auto object-cover">
              </div>
        
              <!-- Informasi Produk -->
              <div class="md:w-1/2 md:pl-4">
                <h2 id="productName" class="text-xl font-bold text-gray-800 mb-1"></h2>
                <p id="productPrice" class="text-lg text-gray-600 mb-4"></p>
        
                <div class="space-y-2 mb-4">
                  <button class="w-full bg-[#ee2b5c] hover:bg-red-700 text-white py-2 rounded" data-bs-toggle="modal" data-bs-target="#exampleModal">Beli</button>
                  <button id="addToCartBtn" class="w-full border border-[#ee2b5c] text-[#ee2b5c] hover:bg-[#e66e8c] py-2 rounded flex items-center justify-center gap-2">Keranjang</button>
                </div>
                <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                  <div class="modal-dialog">
                    <div class="modal-content">
                      <div class="modal-header">
      
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                      </div>
                      <div class="modal-body">
                        <div class="bg-white max-w-md w-full rounded-xl shadow-md p-6">
                          <h2 class="text-2xl font-bold text-center text-gray-800 mb-6">Ringkasan Pesanan</h2>
      
                          <div class="mb-4">
                            <p class="font-semibold">Nama:</p>
                            <p id="userNama">-</p>
                            <p class="font-semibold mt-2">No. HP:</p>
                            <p id="userHP">-</p>
                            <p class="font-semibold mt-2">Alamat:</p>
                            <p id="userAlamat">-</p>
                          </div>
      
                          <div class="mb-4 border-t pt-4">
                            <p class="font-semibold">Nama Produk:</p>
                            <p id="modalProductName">-</p>
                            <p class="font-semibold mt-2">Harga Produk:</p>
                            <p id="modalProductPrice">-</p>
                            <p class="font-semibold mt-2">Biaya Layanan:</p>
                            <p>Rp1.000</p>
                            <p class="font-semibold mt-2">Ongkir:</p>
                            <p>Rp20.000</p>
                          </div>
      
                          <div class="text-right text-red-700 font-bold text-lg mb-4">
                            <p id="modalTotalPrice"></p>
                          </div>
      
                          <button class="w-full bg-[#ee2b5c] hover:bg-red-700 text-white py-2 rounded-lg font-bold transition">
                            Buat Pesanan
                          </button>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <!-- Rating -->
                <div class="mt-4">
                  <div class="flex items-center text-sm text-gray-700 font-semibold mb-2">
                    <span class="text-2xl font-bold text-black">0.0 ‚≠ê</span>
                  </div>
                  
                  <!-- Bar Rating -->
                  <div class="space-y-1">
                    <div class="flex items-center">
                      <span class="w-4 text-sm">5</span>
                      <div class="w-full h-2 bg-gray-200 rounded mx-2">
                        <div class="h-full bg-yellow-400 rounded" style="width: 0%"></div>
                      </div>
                      <span class="text-xs text-gray-500">0%</span>
                    </div>
                    <div class="flex items-center">
                      <span class="w-4 text-sm">4</span>
                      <div class="w-full h-2 bg-gray-200 rounded mx-2">
                        <div class="h-full bg-yellow-400 rounded" style="width: 0%"></div>
                      </div>
                      <span class="text-xs text-gray-500">0%</span>
                    </div>
                    <div class="flex items-center">
                      <span class="w-4 text-sm">3</span>
                      <div class="w-full h-2 bg-gray-200 rounded mx-2">
                        <div class="h-full bg-yellow-400 rounded" style="width: 0%"></div>
                      </div>
                      <span class="text-xs text-gray-500">0%</span>
                    </div>
                    <div class="flex items-center">
                      <span class="w-4 text-sm">2</span>
                      <div class="w-full h-2 bg-gray-200 rounded mx-2">
                        <div class="h-full bg-yellow-400 rounded" style="width: 0%"></div>
                      </div>
                      <span class="text-xs text-gray-500">0%</span>
                    </div>
                    <div class="flex items-center">
                      <span class="w-4 text-sm">1</span>
                      <div class="w-full h-2 bg-gray-200 rounded mx-2">
                        <div class="h-full bg-yellow-400 rounded" style="width: 0%"></div>
                      </div>
                      <span class="text-xs text-gray-500">0%</span>
                    </div>
                  </div>
        
                  <!-- Review Text -->
                  <p class="text-sm mt-3 text-gray-700 font-medium">All Reviews</p>
                </div>
              </div>
            </div>
        
            <!-- Komentar -->
            <div class="mt-6 bg-white rounded-lg p-4 shadow-inner">
              <h3 class="text-md font-semibold text-gray-800 mb-2">Tambahkan Komentar</h3>
        
              <!-- Rating Bintang -->
              <div class="flex mb-3" id="starRating">
                <!-- Bintang akan dibuat pakai JavaScript -->
                <input type="hidden" id="rating" value="0">
                <!-- Placeholder -->
              </div>
        
              <!-- Textarea -->
              <textarea class="w-full border border-gray-300 rounded p-2 text-sm focus:outline-none focus:ring-2 focus:ring-[#8b5e3c]" rows="3" placeholder="Tulis komentarmu di sini..."></textarea>
              <button class="mt-3 bg-[#ee2b5c] hover:bg-red-700 text-white text-sm px-4 py-2 rounded">Kirim</button>
            </div>
          </div>
    </div>
</div>
</div>
<script>
  const params = new URLSearchParams(window.location.search);
  const productId = params.get("id");
  const product = cakes.find(cake => cake.id === productId);

  if (!product) {
    alert("Kue tidak ditemukan.");
    window.location.href = "Home.html";
  } else {
    document.title = product.name;
    document.getElementById("userNama").textContent = localStorage.getItem("nama") || "-";
    document.getElementById("userHP").textContent = localStorage.getItem("nohp") || "-";
    document.getElementById("userAlamat").textContent = localStorage.getItem("alamat") || "-";
    document.getElementById("productImage").src = product.image;
    document.getElementById("productImage").alt = product.name;
    document.getElementById("productName").textContent = product.name;
    document.getElementById("productPrice").textContent = `Rp${product.price.toLocaleString()}`;
    document.getElementById("modalProductName").textContent = `${product.name} 30pcs`;
    document.getElementById("modalProductPrice").textContent = `Rp${(product.price * 30).toLocaleString()}`;
    document.getElementById("modalTotalPrice").textContent = `Total: Rp${(product.price * 30 + 21000).toLocaleString()}`;
  }

  
  // Simpan ke keranjang saat tombol diklik
  document.getElementById("addToCartBtn").addEventListener("click", () => {
    if (!product) return;
  
    const order = {
      id: Date.now(),
      date: new Date().toLocaleString(),
      nama: localStorage.getItem("nama"),
      hp: localStorage.getItem("nohp"),
      alamat: localStorage.getItem("alamat"),
      jenisKue: product.name,
      hargaSatuan: product.price,
      jumlah: 30,
      totalHarga: product.price * 1,
      opsi: "mengikuti gambar",
      kemasan: "mika"
    };
  
    const cart = JSON.parse(localStorage.getItem("bakeryOrders") || "[]");
    cart.push(order);
    localStorage.setItem("bakeryOrders", JSON.stringify(cart));
  
    alert("Kue dimasukkan ke keranjang!");
  });
</script>  
<script>
    if (!localStorage.getItem("loggedIn")) {
     window.location.href = "index.html";
   }

   function logout() {
     localStorage.clear();
     window.location.href = "index.html";
   }
 </script>
</body>
</html>
